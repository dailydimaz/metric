!function(){"use strict";!function(){const e=document.currentScript||document.querySelector("script[data-site]"),t=null==e?void 0:e.getAttribute("data-site"),n=((null==e?void 0:e.getAttribute("data-cross-domain"))||"").split(",").map(e=>e.trim()).filter(Boolean);let o=null==e?void 0:e.getAttribute("data-api");if(!o&&(null==e?void 0:e.src))try{const t=new URL(e.src);if(t.hostname.includes("supabase.co")||t.hostname.includes("supabase.in"))o=t.origin+"/functions/v1/track";else{const t=e.getAttribute("data-supabase-url");t&&(o=t+"/functions/v1/track")}}catch(f){}if(!t||!o)return;let i=null,r=Date.now();const a=()=>{const e=Date.now(),t=new URLSearchParams(window.location.search).get("_mm_sid");return t&&!i&&(i=t,r=e),(!i||e-r>18e5)&&(i=Math.random().toString(36).slice(2)+e.toString(36)),r=e,i},s=()=>{const e=document.referrer;if(!e)return null;try{return new URL(e).hostname===window.location.hostname?null:e}catch{return null}},c=(e,n)=>{const i=(()=>{const e=new URLSearchParams(window.location.search),t={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(n=>{const o=e.get(n);o&&(t[n]=o)}),Object.keys(t).length?t:null})(),r={...n};i&&(r.utm=i),window.screen&&(r.screen=`${window.screen.width}x${window.screen.height}`);const c={site_id:t,event_name:e||"pageview",url:window.location.pathname,referrer:s(),session_id:a(),language:navigator.language||navigator.userLanguage,properties:Object.keys(r).length?r:{}};if(navigator.sendBeacon){const e=new Blob([JSON.stringify(c)],{type:"text/plain"});navigator.sendBeacon(o,e)||fetch(o,{method:"POST",body:JSON.stringify(c),keepalive:!0}).catch(()=>{})}else fetch(o,{method:"POST",body:JSON.stringify(c),keepalive:!0}).catch(()=>{})};let d=window.location.pathname,l=Date.now(),m=!1;const u=()=>{const e=Math.round((Date.now()-l)/1e3);e>=5&&e<86400&&(c("engagement",{duration_seconds:e,url:d}),m=!0)},w=()=>{window.location.pathname!==d&&(u(),d=window.location.pathname,l=Date.now(),m=!1,c("pageview"))};if(window.history.pushState){const e=window.history.pushState;window.history.pushState=function(){e.apply(this,arguments),w()},window.addEventListener("popstate",w)}document.addEventListener("visibilitychange",()=>{document.hidden?u():(l=Date.now(),m=!1)}),window.addEventListener("pagehide",u),setInterval(()=>{!document.hidden&&!m&&Date.now()-l>3e4&&(u(),l=Date.now(),m=!1)},3e4);const h=()=>{c("pageview"),document.addEventListener("click",e=>{const t=e.target.closest("a");if(null==t?void 0:t.href)try{const e=new URL(t.href,window.location.origin);e.hostname!==window.location.hostname&&(c("outbound",{href:t.href,text:t.innerText.substring(0,100)}),n.some(t=>e.hostname.includes(t))&&(t.href+=(t.href.includes("?")?"&":"?")+"_mm_sid="+a()))}catch{}},!0),(()=>{const e=[".pdf",".docx",".xlsx",".zip",".rar",".csv",".mp3",".mp4",".dmg",".exe",".pptx",".jpg",".png",".gif",".svg"];document.addEventListener("click",t=>{const n=t.target.closest("a");if(!(null==n?void 0:n.href))return;const o=n.href.toLowerCase().split("?")[0],i=e.find(e=>o.endsWith(e));i&&c("file_download",{href:n.href,filename:n.href.split("/").pop().split("?")[0],extension:i.substring(1)})},!0)})(),(()=>{const e=[25,50,75,90,100],t={};let n;const o=()=>{const n=document.documentElement,o=document.body,i=Math.max(o.scrollHeight,n.scrollHeight,o.offsetHeight,n.offsetHeight,o.clientHeight,n.clientHeight),r=window.pageYOffset||n.scrollTop,a=window.innerHeight||n.clientHeight;if(i<=a)return void(t[100]||(t[100]=!0,c("scroll_depth",{percent:100,url:window.location.pathname})));const s=Math.min(100,Math.round((r+a)/i*100));e.forEach(e=>{s>=e&&!t[e]&&(t[e]=!0,c("scroll_depth",{percent:e,url:window.location.pathname}))})};window.addEventListener("scroll",()=>{clearTimeout(n),n=setTimeout(o,200)}),setTimeout(o,1e3)})(),(()=>{const e=new Set;document.addEventListener("focusin",t=>{if(["INPUT","TEXTAREA","SELECT"].includes(t.target.tagName)){const n=t.target.form;n&&!e.has(n)&&(e.add(n),c("form_start",{form_id:n.id||n.name||"unknown"}))}},!0),document.addEventListener("submit",t=>{const n=t.target;"FORM"===(null==n?void 0:n.tagName)&&(e.delete(n),c("form_submit",{form_id:n.id||n.name||"unknown"}))},!0)})(),(()=>{if("function"==typeof PerformanceObserver){const e=(e,t)=>c("web_vitals",{metric:e,value:"CLS"===e?t:Math.round(t),rating:t>("LCP"===e?2500:"CLS"===e?.1:200)?"poor":"good"});try{new PerformanceObserver(e=>{const t=e.getEntries().pop();t&&(window._mm_lcp=t.startTime)}).observe({type:"largest-contentful-paint",buffered:!0}),window._mm_cls=0,new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.hadRecentInput||(window._mm_cls+=e.value)})}).observe({type:"layout-shift",buffered:!0}),window._mm_inp=0,new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.interactionId&&e.duration>window._mm_inp&&(window._mm_inp=e.duration)})}).observe({type:"event",durationThreshold:16,buffered:!0});const t=()=>{void 0!==window._mm_lcp&&e("LCP",window._mm_lcp),void 0!==window._mm_cls&&e("CLS",window._mm_cls),void 0!==window._mm_inp&&window._mm_inp>0&&e("INP",window._mm_inp)};window.addEventListener("visibilitychange",()=>{document.hidden&&t()}),window.addEventListener("pagehide",t)}catch(f){}}})(),fetch(o.replace("/track","/get-config"),{method:"POST",body:JSON.stringify({site_id:t}),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.tags&&e.tags.forEach(e=>{try{if("custom_script"===e.type&&e.config.url){const t=document.createElement("script");t.src=e.config.url,t.async=!0,document.head.appendChild(t)}}catch(f){}})}).catch(()=>{}),setTimeout(()=>{document.title.toLowerCase().includes("404")&&c("404",{url:window.location.href,referrer:document.referrer})},1e3)};"complete"===document.readyState?h():window.addEventListener("load",h)}()}();
